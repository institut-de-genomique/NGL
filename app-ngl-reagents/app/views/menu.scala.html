@this(ctx : fr.cea.ig.ngl.NGLApplication)

@(nav: String = "")

@import play.mvc.Http.Context
@import play.api.Play
@import controllers.authorisation.PermissionHelper

@import views.html.ddmenu._

@import controllers.reagents.tpl.routes.Receptions

@writePermission = @{ PermissionHelper.checkPermission(user, "writing") }
@adminPermission = @{ PermissionHelper.checkPermission(user, "admin") }
@always          = @{ true }
@version         = @{ ctx.nglConfig().getApplicationVersion() }
@isCNSInstitute  = @{ "CNS" == ctx.nglConfig().getInstitute() }
@isCNGInstitute  = @{ "CNG" == ctx.nglConfig().getInstitute() }

@user = @{ ctx.currentUser() }  
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
	<div class="container-fluid">
		<div class="navbar-header">
			<a class="navbar-brand" href="@controllers.main.tpl.routes.Main.home()">@ctx.messageEnv("application.name")</a>
    	</div>
    	<div class="collapse navbar-collapse">
    		<ul class="nav navbar-nav">
    			<li class="dropdown @("active".when(nav.startsWith("catalogs")))">
							<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" id="reagentCatalog">@Messages("reagentCatalogs.menu")<b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu" aria-labelledby="reagentCatalogs">
								<li class="@("active".when(nav == "reagentCatalogs.search"))"><a href="@controllers.reagents.tpl.routes.KitCatalogs.home("search")">@Messages("reagentCatalogs.menu.search")</a></li>
								<li class="@("active".when(nav == "reagentCatalogs.create"))"><a href="@controllers.reagents.tpl.routes.KitCatalogs.home("create")">@Messages("reagentCatalogs.menu.create")</a></li>																			
							</ul>
						  </li>	
				@if(isCNSInstitute) {
					@ddmenu(nav,"receptions","reagent.receptions.menu") {
						@ddme(nav, always,          "receptions.search",   Receptions.home("search"),   "reagent.receptions.menu.search")
						@ddme(nav, writePermission, "receptions.state",    Receptions.home("state"),     "reagent.receptions.menu.state")
						@** @ddme(nav, writePermission, "receptions.create",   Receptions.home("create"),   "reagent.receptions.menu.create") *@
						@ddme(nav, writePermission, "receptions.new",		 Receptions.home("new"),	  "reagent.receptions.menu.new_from_file")
					  }
				}
			</ul>

			<ul class="nav navbar-nav navbar-right">
				<li>
				<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" id="user">
				<i class="fa fa-user"></i> @user <b class="caret"></b></a>
				<ul class="dropdown-menu" role="menu" aria-labelledby="user">
						<li><a href="/authentication/logout">@Messages("authentification.dropdown_list.signout")</a></li>
				</ul>
				</li>				
			</ul>
		</div>
	</div>		
</nav>
